<template>
  <el-menu
    :default-active="activeView"
    class="global-nav-menu"
    mode="horizontal"
    :ellipsis="false"
    @select="handleSelect"
  >
    <el-menu-item index="home-view" class="nav-logo">ğŸ¨ è‰ºå¯æ™ºAI</el-menu-item>

    <div class="flex-grow" />

    <el-menu-item v-for="nav in navItems" :key="nav.id" :index="nav.id">
      <i class="icon ph-bold" :class="nav.icon"></i>
      <span>{{ nav.text }}</span>
    </el-menu-item>

    <div class="flex-grow" />

    <el-menu-item index="settings-trigger" class="settings-trigger">
      <i class="icon ph-bold ph-gear"></i>
      <span>è®¾ç½®</span>
    </el-menu-item>
  </el-menu>
</template>

<script setup>
const props = defineProps({
  navItems: Array,
  activeView: String,
});

const emit = defineEmits(['navigate', 'open-settings']);

function handleSelect(index) {
  if (index === 'settings-trigger') {
    emit('open-settings');
  } else {
    emit('navigate', index);
  }
}
</script>

<style scoped>
/* 1. å¯¼èˆªæ ä¸»ä½“ï¼šæ·±è“è‰²èƒŒæ™¯ */
.global-nav-menu {
  height: var(--nav-height);
  border-bottom: 1px solid var(--secondary-color); /* é¢œè‰²åŠ æ·±ä¸€ç‚¹ */
  padding: 0 20px;
  background-color: var(--primary-color); /* æ·±è“è‰²èƒŒæ™¯ */
  box-shadow: none; /* ç§»é™¤é˜´å½± */
}

/* 2. Logo æ ·å¼ï¼šç™½è‰²æ–‡å­— */
.nav-logo {
  font-size: 1.4rem;
  font-weight: bold;
  color: white !important;
}
.nav-logo.is-active {
  border-bottom-color: transparent !important; /* é¦–é¡µæ¿€æ´»æ—¶æ— ä¸‹åˆ’çº¿ */
}

.flex-grow {
  flex-grow: 1;
}

/* 3. èœå•é¡¹ï¼šæµ…è‰²æ–‡å­— */
.el-menu-item {
  font-size: 1rem;
  display: flex;
  align-items: center;
  gap: 8px;
  color: rgba(255, 255, 255, 0.8) !important; /* èœå•é¡¹é»˜è®¤æ–‡å­—é¢œè‰² */
  background-color: transparent !important;
  border-bottom-color: transparent !important;
}

.el-menu-item .icon {
  font-size: 1.2rem;
}

/* 4. èœå•é¡¹ æ‚¬åœ æ ·å¼ */
.el-menu-item:hover {
  color: white !important;
  background-color: var(--secondary-color) !important; /* æ‚¬åœæ—¶é¢œè‰²åŠ æ·± */
}

/* 5. èœå•é¡¹ æ¿€æ´» æ ·å¼ï¼šé‡‘è‰²ä¸‹åˆ’çº¿ */
.el-menu-item.is-active {
  color: white !important;
  border-bottom: 3px solid var(--accent-color) !important;
}

/* 6. ç‰¹æ®Šå¤„ç†Logoçš„æ¿€æ´»æ€ */
.nav-logo.is-active {
  color: white !important;
  border-bottom-color: transparent !important;
}
/* 7. ç‰¹æ®Šå¤„ç†è®¾ç½®æŒ‰é’®çš„æ¿€æ´»æ€ */
.settings-trigger.is-active {
  border-bottom-color: transparent !important;
}
</style>